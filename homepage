<?php
    include "../Backend/controller.php";
?>


<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Hello World</title>

</head>

<body>

    <h1>CUEPALS</h1>

    <div class="container mt-5">
        <h3>Add new Cuepal</h3>
        <!-- User Form -->
        <form action = "../Backend/controller.php?method_finder=create" method="post" class="mb-4">
            <div class="mb-3">
                <label for="last_name" class ="form-label">Last Name</label>
                <input type = "text" class ="form-control" id ="last_name" name="last_name" required>
            </div>

            <div class="mb-3">
                <label for="first_name" class ="form-label">First Name</label>
                <input type = "text" class ="form-control" id ="first_name" name="first_name" required>
            </div>

            <div class="mb-3">
                <label for="middle_name" class ="form-label">Middle Name</label>
                <input type = "text" class ="form-control" id ="middle_name" name="middle_name" required>
            </div>

            <button type="submit" name="submit_button" class="btn btn-success">Create User</button>
        </form>
    </div>

    <table class = "lamisaan">
        <h2>List of Cuepals</h2>
        <thead>
            <tr>
                <th>ID</th>
                <th>Last Name</th>
                <th>First Name</th>
                <th>Middle Name</th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody>
            <?php
            $controller = new controller();
            $users=$controller->read_all();
           
            foreach($users as $user):
            ?>
            <tr>
                <td><?=htmlspecialchars($user['id'])?></td>
                <td><?=htmlspecialchars($user['last_name'])?></td>
                <td><?=htmlspecialchars($user['first_name'])?></td>
                <td><?=htmlspecialchars($user['middle_name'])?></td>
                <td>
                    <!--for edit b-->
                    <form action="../Backend/controller.php?" method="get" style="display:inline;">
                        <!--what method we want to access-->
                        <input type="hidden" name="method_finder" value="edit">
                        <input type="hidden" name="id" value="<?=htmlspecialchars($user['id'])?>">
                        <button type="submit" class="btn btn-primary">Edit</button>
                    </form>

                    <!--for delete b-->
                    <form action="../Backend/controller.php?" method="get" style="display:inline;">
                        <!--what method we want to access-->
                        <input type="hidden" name="method_finder" value="delete">
                        <input type="hidden" name="id" value="<?=htmlspecialchars($user['id'])?>">
                        <button type="submit" onclick="return confirm('Apay ngy nga i-delete mo_____? :((');">Delete</button>
                    </form>
                    
                </td>
            </tr>

            <?php
            endforeach;
            ?>
        </tbody>

    </table>
</body>
</html>
